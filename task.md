# Function Lab 优先级任务清单

> 📅 更新时间：2026-01-13
> 📊 项目健康度评分：7.8/10 - 良好，持续优化中

---

## 🎯 优先级最高的5个任务

### 🔴 任务0：【P0-最高优先级】移动端适配与体验优化 (Mobile Optimization)
**影响范围**: 🔴 高 - 移动端用户体验
**预计耗时**: 3小时
**依赖任务**: 无

#### 问题描述
- 当前布局在手机端无法正常查看（Sidebar 占用过多空间）。
- 缺乏移动端导航菜单。
- Portal 返回按钮可能遮挡内容。

#### 实施步骤
1. **基础响应式布局 (Phase 1) ✅**
   - ✅ 在 `App.tsx` 引入移动端检测或 Media Query 状态。
   - ✅ 添加移动端 Hamburger 菜单按钮。
   - ✅ 实现侧边栏 (Sidebar) 的移动端 Drawer 模式 (Overlay)。
2. **组件适配 (Phase 2) ✅**
   - ✅ 优化 `InfoPanel` 在小屏下的显示（字体、间距）。
   - ✅ 调整 `Visualizer` 容器以适应触控。
   - ✅ 优化 "Return to Portal" 按钮在移动端的定位。
3. **视觉一致性 (Phase 3) 🚧**
   - 统一 Glassmorphism 效果在移动端的表现 (已通过基础组件覆盖)。
   - 确保 Dark Mode 颜色在 iOS/Android 上的一致性 (待验证)。

---

### 🟡 任务1：【P1-高优先级】拆分大型组件 CleaningDemo
**影响范围**: 🟡 中 - 代码维护性和可读性
**预计耗时**: 2小时
**依赖任务**: 无

#### 问题描述
- `CleaningDemo.tsx` 行数过多（700+行），包含多个复杂的演示逻辑。
- 难以维护和调试。

#### 实施步骤
1. 创建 `components/demos/cleaning/` 目录。
2. 将每个函数演示（如 `DropDuplicatesDemo`, `FillNaDemo` 等）提取为独立的子组件。
3. 在 `CleaningDemo.tsx` 中组合这些子组件。

---

### 🟡 任务2：【P1-高优先级】添加代码分割 (Code Splitting)
**影响范围**: 🟡 中 - 首屏加载性能
**预计耗时**: 1小时
**依赖任务**: 无

#### 问题描述
- 当前所有演示组件都在主包中加载。
- 首屏加载体积较大（约 380KB）。

#### 实施步骤
1. 使用 `React.lazy()` 动态导入各个 `*Demo.tsx` 组件。
2. 在 `Visualizer.tsx` 中添加 `<Suspense>` 加载状态。
3. 验证加载体验是否流畅。

---

### 🟡 任务3：【P1-高优先级】添加 GitHub Actions CI/CD 流程
**影响范围**: 🟡 中 - 自动化流程缺失
**预计耗时**: 2小时
**依赖任务**: 确保测试和 Lint 通过（已完成）

#### 实施步骤
1. 创建 `.github/workflows/ci.yml`。
2. 配置 Lint, Test, Build 步骤。
3. 确保 PR 自动触发检查。

---

### 🟡 任务4：【P2-中优先级】统一类型定义
**影响范围**: 🟢 低 - 代码整洁度
**预计耗时**: 1小时

#### 问题描述
- `types.ts` 与组件内部存在重复的接口定义。
- 需要将通用类型统一移动到 `types.ts`。

---

### 🟡 任务5：【P2-中优先级】优化演示组件性能 (React.memo)
**影响范围**: 🟢 低 - 运行时性能
**预计耗时**: 1小时

#### 问题描述
- 频繁切换或交互时，部分未变化的组件可能发生不必要的重渲染。
- 使用 `React.memo` 对纯展示组件进行包裹。

---

## 📊 待办事项池 (Backlog)

### 🟢 P3 - 低优先级（长期优化）
1. **提取魔法数字** - 将硬编码的动画时长提取为常量
2. **统一常量管理** - 将颜色、动画时长等统一到 `constants.ts`
3. **完善文档** - 添加 JSDoc 注释和 API 文档
4. **添加 Storybook** - 组件文档化和开发环境
5. **性能监控** - 添加性能指标收集
6. **移除未使用的环境变量** - 清理 `GEMINI_API_KEY` 配置

---

## ✅ 已完成的任务 (Archived)

### 2026-01-13 - 基础设施与体验优化
- ✅ **修复 Jest 测试配置**: 迁移至 CommonJS，测试通过率 95%
- ✅ **修复 ESLint 配置**: 迁移至 Flat Config，Lint 功能恢复
- ✅ **TypeScript 严格模式**: 开启 `strict: true`，修复所有类型错误
- ✅ **错误边界**: 添加 `ErrorBoundary` 防止应用崩溃
- ✅ **欢迎页面**: 新增 `WelcomeScreen`，支持首次访问引导和中文界面
- ✅ **布局修复**: 全面标准化 `Cleaning`, `Slicing`, `Engineering`, `Logic`, `Training` 板块的布局（统一 `pt-20` 和按钮间距）
- ✅ **界面重构**: 优化左侧滚动栏和整体 UI/UX，统一 Glassmorphism 风格，提升视觉体验

---

**负责人**: Activer007
**当前状态**: 基础设施修复完毕，进入性能优化和代码重构阶段。
